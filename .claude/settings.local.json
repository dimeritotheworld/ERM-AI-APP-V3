{
  "model": "sonnet",
  "env": {
    "CLAUDE_CODE_MAX_OUTPUT_TOKENS": "32000"
  },
  "permissions": {
    "allow": [
      "Bash(npm install:*)",
      "Bash(npx prisma init:*)",
      "Bash(dir \"c:\\\\Users\\\\sfschool\\\\Desktop\\\\All apps\\\\MVP ERM - Copy\\\\assets\\\\js\\\\modules\\\\risk-register\")",
      "Bash(findstr:*)",
      "Bash(dir \"c:\\\\Users\\\\sfschool\\\\Desktop\\\\All apps\\\\MVP ERM - Copy\\\\assets\\\\js\\\\modules\\\\reports\")",
      "Bash(dir:*)",
      "Bash(npm run dev:*)",
      "Bash(powershell -Command \"Get-Content ''c:\\\\Users\\\\sfschool\\\\Desktop\\\\All apps\\\\MVP ERM - Copy\\\\assets\\\\css\\\\modules\\\\reports.css'' | Select-Object -Last 50\")",
      "Bash(node -c:*)",
      "Bash(powershell -Command \"Get-Content ''c:\\\\Users\\\\sfschool\\\\Desktop\\\\All apps\\\\MVP ERM - Copy\\\\assets\\\\js\\\\modules\\\\reports\\\\report-editor.js'' | Select-Object -Last 30\")",
      "Bash(powershell -Command \"\\(Get-Content ''c:\\\\Users\\\\sfschool\\\\Desktop\\\\All apps\\\\MVP ERM - Copy\\\\assets\\\\js\\\\modules\\\\reports\\\\reports.js''\\).Count\")",
      "Bash(powershell:*)",
      "Bash(node:*)",
      "Bash(curl:*)",
      "Bash(taskkill:*)",
      "Bash(del \"c:\\\\Users\\\\sfschool\\\\Desktop\\\\All apps\\\\MVP ERM - Copy\\\\assets\\\\js\\\\modules\\\\risk-register\\\\risk-ai-scoring.js\")",
      "Bash(del \"c:\\\\Users\\\\sfschool\\\\Desktop\\\\All apps\\\\MVP ERM - Copy\\\\assets\\\\js\\\\modules\\\\risk-register\\\\risk-scoring-keywords.js\")",
      "Bash(tree:*)",
      "Bash(npm start)",
      "Bash(netstat:*)",
      "Bash(git checkout:*)",
      "Bash(powershall -Command \"\\(Get-Content ''c:\\\\Users\\\\sfschool\\\\Desktop\\\\All apps\\\\MVP ERM - Copy\\\\index.html''\\) -replace ''risk-register-ai-ui.js\\\\?v=2.7.0'', ''risk-register-ai-ui.js?v=9.9.9'' | Set-Content ''c:\\\\Users\\\\sfschool\\\\Desktop\\\\All apps\\\\MVP ERM - Copy\\\\index.html''\")",
      "Bash(grep -rn \"erm:controls-updated\\\\|controls-updated\" \"c:\\\\Users\\\\sfschool\\\\Desktop\\\\All apps\\\\MVP ERM - Copy\\\\assets\\\\js\\\\modules\"\" --include=\"*.js \")",
      "Bash(timeout 5 node:*)",
      "Bash(tasklist:*)",
      "Bash(cmd //c \"taskkill /PID 13408 /F\")",
      "Bash(node server/server.js:*)",
      "Bash(cmd //c \"taskkill /PID 67564 /F\")",
      "Bash(ls:*)",
      "Bash(del \"assets\\\\js\\\\modules\\\\reports\\\\report-editor.js\")",
      "Bash(del \"assets\\\\css\\\\modules\\\\report-editor.css\")",
      "Bash(cmd //c \"del assets\\\\js\\\\modules\\\\reports\\\\report-editor.js\")",
      "Bash(cmd //c \"del assets\\\\css\\\\modules\\\\report-editor.css\")",
      "Bash(powershell -Command:*)",
      "Bash(cmd //c:*)",
      "Bash(copy \"..\\\\MVP ERM\\\\assets\\\\css\\\\modules\\\\report-editor.css\" \"assets\\\\css\\\\modules\\\\report-editor.css\")",
      "Bash(cat:*)",
      "Bash(timeout:*)",
      "Bash(ping:*)",
      "Bash(powershell \"Stop-Process -Id 52516 -Force\")",
      "Bash(powershell \"Stop-Process -Id 84792 -Force\")",
      "Bash(powershell \"Stop-Process -Id 38704 -Force\")",
      "Bash(powershell \"Stop-Process -Id 56516 -Force\")",
      "Bash(powershell \"Stop-Process -Id 89104 -Force\")",
      "Bash(node --check:*)",
      "Bash(node -e \"require\\(''./assets/js/modules/reports/report-editor-v2.js''\\)\")",
      "Bash(powershell -Command \"\\(Get-Content ''c:\\\\Users\\\\sfschool\\\\Desktop\\\\All apps\\\\MVP ERM - Copy\\\\assets\\\\js\\\\modules\\\\reports\\\\report-editor-v2.js'' | Measure-Object -Line\\).Lines\")",
      "Bash(node server.js:*)",
      "Bash(npx kill-port:*)",
      "Bash(git config:*)",
      "Bash(git init:*)",
      "Bash(git add:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nERM AI APP V1 - Complete Enterprise Risk Management Platform\n\nFeatures:\n- Notion-style block-based report editor with AI assistance\n- Professional PDF export with A4 layout and proper margins\n- Auto-pagination system with overflow handling\n- AI content insertion with formatting preservation\n- Risk register with AI suggestions\n- Control library management\n- Team collaboration with mentions\n- Admin portal for workspace management\n- Multi-industry templates \\(Healthcare, Manufacturing, Energy, etc.\\)\n\nTechnical:\n- Express.js server with Puppeteer PDF generation\n- ES5 compatible JavaScript for broad browser support\n- Professional margins: 25mm top/bottom, 25mm left, 20mm right\n- Orphan heading prevention in page breaks\nEOF\n\\)\")",
      "Bash(gh repo create:*)",
      "Bash(git remote add:*)",
      "Bash(git branch:*)",
      "Bash(git push:*)",
      "Bash(git remote set-url:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nERM AI APP V2 - No Templates\n\nRemoved all industry template files and references to reduce codebase size.\n\nRemoved:\n- assets/templates/ folder \\(53 files, 2.8MB\\)\n- Template script references from index.html\n- Template documentation files\n\nThe app still works - AI-generated risks via DeepSeek are still available.\nStatic template-based starter risks will return empty gracefully.\n\nðŸ¤– Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(grep:*)",
      "Bash(del \"c:\\\\Users\\\\sfschool\\\\Desktop\\\\All apps\\\\MVP ERM - Copy\\\\assets\\\\js\\\\risk-register.js\")",
      "Bash(del \"c:\\\\Users\\\\sfschool\\\\Desktop\\\\All apps\\\\MVP ERM - Copy\\\\assets\\\\css\\\\risk-register.css\")",
      "Bash(find:*)",
      "Bash(wc:*)",
      "Bash(comm:*)",
      "Bash(while read f)",
      "Bash(do echo \" - $f\")",
      "Bash(done)",
      "Bash(do echo \"   - $f\")",
      "Bash(for f in \"c:\\\\Users\\\\sfschool\\\\Desktop\\\\All apps\\\\MVP ERM - Copy\\\\assets\\\\js\\\\modules\\\\reports\"/*.js)",
      "Bash(do if grep -q addEventListener \"$f\")",
      "Bash(fi)",
      "Bash(for f in \"c:\\\\Users\\\\sfschool\\\\Desktop\\\\All apps\\\\MVP ERM - Copy\\\\assets\\\\js\\\\modules\\\\risk-register\"/*.js)",
      "Bash(for f in \"c:\\\\Users\\\\sfschool\\\\Desktop\\\\All apps\\\\MVP ERM - Copy\\\\assets\\\\js\\\\modules\\\\controls\"/*.js)",
      "Bash(for f in \"c:\\\\Users\\\\sfschool\\\\Desktop\\\\All apps\\\\MVP ERM - Copy\\\\assets\\\\js\\\\core\"/*.js)",
      "Bash(npx http-server -p 3000)",
      "Bash(timeout /t 3)",
      "Bash(del \"c:\\\\Users\\\\sfschool\\\\Desktop\\\\All apps\\\\MVP ERM - Copy\\\\assets\\\\js\\\\modules\\\\risk-register\\\\risk-modal-register.js\")",
      "Bash(timeout /t)",
      "Bash(powershell -Command \"\\(Get-Content -Path ''assets\\\\js\\\\modules\\\\controls\\\\controls-ai-ui.js'' -Raw\\) -replace ''for \\\\\\(var i = 0; i < Math\\\\.min\\\\\\(allRisks\\\\.length, 8\\\\\\); i\\\\+\\\\+\\\\\\)'', ''for \\(var i = 0; i < allRisks.length; i++\\)'' | Set-Content -Path ''assets\\\\js\\\\modules\\\\controls\\\\controls-ai-ui.js'' -NoNewline\")",
      "Bash(powershell -Command \"\n$content = Get-Content -Path ''assets\\\\js\\\\modules\\\\controls\\\\controls-ai-ui.js'' -Raw\n\n# Replace the _renderLinkedRisksDeepSeek function to show ALL risks\n$oldFunc = @''\nERM.controlsAI._renderLinkedRisksDeepSeek = function\\\\\\(suggestions, allRisks\\\\\\) \\\\{\n  var self = this;\n\n  // Build a map of risk IDs for quick lookup\n  var riskMap = \\\\{\\\\};\n  for \\\\\\(var i = 0; i < allRisks\\\\.length; i\\\\+\\\\+\\\\\\) \\\\{\n    riskMap\\\\[allRisks\\\\[i\\\\]\\\\.id\\\\] = allRisks\\\\[i\\\\];\n  \\\\}\n\n  var content =\n    ''<div class=\"\"ai-suggestions-container\"\">'' \\\\+\n    ''<p class=\"\"ai-suggestions-intro\"\">AI recommends linking these risks \\\\\\(click Use to auto-check\\\\\\):</p>'' \\\\+\n    ''<div class=\"\"ai-suggestions-list ai-stagger-container\"\">'';\n''@\n\n$newStart = @''\nERM.controlsAI._renderLinkedRisksDeepSeek = function\\(suggestions, allRisks\\) {\n  var self = this;\n\n  // Build a map of risk IDs for quick lookup  \n  var riskMap = {};\n  var recommendedIds = {};\n  for \\(var i = 0; i < allRisks.length; i++\\) {\n    riskMap[allRisks[i].id] = allRisks[i];\n  }\n  // Track which risks are AI recommended\n  for \\(var r = 0; r < suggestions.length; r++\\) {\n    if \\(suggestions[r].riskId\\) {\n      recommendedIds[suggestions[r].riskId] = true;\n    }\n  }\n\n  var content =\n    ''<div class=\"\"ai-suggestions-container\"\" style=\"\"max-height: 60vh; overflow-y: auto;\"\">'' +\n    ''<p class=\"\"ai-suggestions-intro\"\">AI recommends these risks. All register risks shown below:</p>'' +\n    ''<div class=\"\"ai-suggestions-list ai-stagger-container\"\">'';\n''@\n\nif \\($content -match ''var riskMap = \\\\{\\\\};[\\\\r\\\\n]+  for \\\\\\(var i = 0; i < allRisks\\\\.length; i\\\\+\\\\+\\\\\\)''\\) {\n  Write-Host ''Found pattern''\n} else {\n  Write-Host ''Pattern not found''\n}\n\")"
    ]
  }
}
